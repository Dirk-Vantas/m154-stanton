package ch.ilv.selenium;

import java.time.Duration;
import java.util.List;
import java.util.concurrent.TimeUnit;

import org.junit.Assert;
import org.junit.Test;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.chrome.ChromeOptions;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.WebDriverWait;


public class SeleniumTest {

	
	@Test
	public void testGoogle() {
        //System.setProperty("webdriver.ie.driver", "C:/dev/IEDriverServer.exe");
        //InternetExplorerOptions options = new InternetExplorerOptions();
        //WebDriver driver=new InternetExplorerDriver(options);
		
        System.setProperty("webdriver.chrome.driver", "C:/dev/tools/chromedriver.exe");
        ChromeOptions options = new ChromeOptions();
        WebDriver driver=new ChromeDriver(options);

        //driver.manage().window().maximize();
        
        driver.get("http://www.google.ch");
        
        driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
        driver.findElement(By.className("QS5gu sy4vM")).click();

		WebElement searchText = driver.findElement(By.name("q"));
		searchText.sendKeys("ilv.ch");
		searchText.submit();
		
		WebElement waitElement = (new WebDriverWait(driver, Duration.ofMillis(10))).until(ExpectedConditions.presenceOfElementLocated(By.id("rso")));
		
		
		List<WebElement> findElements = driver.findElements(By.xpath("//div[@class='yuRUbf']/a"));

		driver.get(findElements.get(0).getAttribute("href"));
		
		waitElement = (new WebDriverWait(driver, Duration.ofMillis(10))).until(ExpectedConditions.presenceOfElementLocated(By.className("bd-imagelink-5")));
		
		boolean isILVPage = driver.getPageSource().contains("ÜK kurz und bündig");
		
		Assert.assertTrue(isILVPage);
		
		driver.close();
	}


}